////////////////////////////////////////////////////////////////////////////////
// МОДУЛЬ СОДЕРЖИТ ВСПОМОГАТЕЛЬНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ ДЛЯ РАБОТЫ С ФАЙЛАМИ
// 
//

// Возвращает тип платформы сервера
Функция ТипПлатформыСервера() Экспорт
	СисИнфо = Новый СистемнаяИнформация;
	Возврат СисИнфо.ТипПлатформы;
КонецФункции	

// Возвращает путь модуля криптографии для текущего компьютера
Функция ПутьМодуляКриптографии() Экспорт
	
	ТипПлатформыСервера = ТипПлатформыСервера();
	Если ТипПлатформыСервера = ТипПлатформы.Windows_x86 ИЛИ ТипПлатформыСервера = ТипПлатформы.Windows_x86_64 Тогда
		Возврат ""; // в Windows путь модуля криптографии не нужен
	КонецЕсли;	
	
	ИмяКомпьютера = ИмяКомпьютера();
	ПутьМодуля = "";
	
	УстановитьПривилегированныйРежим(Истина);
	
	// Подготовить структуру отбора по измерениям      
	СтруктураОтбора = Новый Структура;
	СтруктураОтбора.Вставить("ИмяКомпьютера", ИмяКомпьютера);
	   
	// Получить структуру с данными ресурсов записи
	СтруктураРесурсов = РегистрыСведений.ПутиМодулейКриптографииСерверовЛинукс.Получить(СтруктураОтбора);
	   
	// Получить путь из регистра
	ПутьМодуля = СтруктураРесурсов.ПутьМодуляКриптографии;
	
	Возврат ПутьМодуля;
	
КонецФункции	