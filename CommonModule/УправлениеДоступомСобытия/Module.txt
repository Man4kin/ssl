
// Обработчик ЗаписатьГруппыИВидыДоступа события ПриЗаписи подписки на события
// "ЗаписатьГруппыИВидыДоступа" вызывает метод записи групп доступа и видов доступа
// в РегистрСведений.ГруппыЗначенийДоступа, для требуемых объектов метаданных.
//
Процедура ЗаписатьГруппыИВидыДоступа(Знач Объект, Отказ) Экспорт

	Если Объект.ОбменДанными.Загрузка И НЕ Объект.ДополнительныеСвойства.Свойство("ЗаписатьГруппыИВидыДоступа") Тогда
		Возврат;
	КонецЕсли;
	
	#Если Сервер Тогда
		УправлениеДоступом.ЗаписатьГруппыИВидыДоступа(Объект, Отказ);
	#Иначе
		УправлениеДоступом.ЗаписатьГруппыИВидыДоступа(Объект.Ссылка, Отказ);
	#КонецЕсли

КонецПроцедуры // ЗаписатьГруппыИВидыДоступа()

// Обработчик ЗаписатьНаборыЗначенийДоступа события ПриЗаписи подписки на события
// "ЗаписатьНаборыЗначенийДоступа" вызывает метод записи значений доступа объекта
// в РегистрСведений.НаборыЗначенийДоступа.
//  Возможен случай использования подсистемы "УправлениеДоступом", когда
// указанной подписки не существует, если наборы значений доступа не применяются.
//
Процедура ЗаписатьНаборыЗначенийДоступа(Знач Объект, Отказ) Экспорт

	Если Объект.ОбменДанными.Загрузка И НЕ Объект.ДополнительныеСвойства.Свойство("ЗаписатьНаборыЗначенийДоступа") Тогда
		Возврат;
	КонецЕсли;
	
	#Если Сервер Тогда
		УправлениеДоступом.ЗаписатьНаборыЗначенийДоступа(Объект);
	#Иначе
		УправлениеДоступом.ЗаписатьНаборыЗначенийДоступа(Объект.Ссылка);
	#КонецЕсли

КонецПроцедуры // ЗаписатьНаборыЗначенийДоступа()

// Обработчик ЗаполнитьНаборыЗначенийДоступаТабличныхЧастей события ПередЗаписью подписки на события
// "ЗаполнитьНаборыЗначенийДоступаТабличныхЧастей" вызывает метод заполнения значений доступа
// табличной части объекта, если для ограничения доступа к нему самому используются наборы.
//  Возможен случай использования подсистемы "УправлениеДоступом", когда
// указанной подписки не существует, если для указанной цели наборы не применяются.
//
// Для документов и справочников нужно использовать разные подписки с одним и тем же обработчиком.
//
Процедура ЗаполнитьНаборыЗначенийДоступаТабличныхЧастей(Знач Объект, Отказ = Неопределено, РежимЗаписи = Неопределено, РежимПроведения = Неопределено) Экспорт

	Если Объект.ОбменДанными.Загрузка И НЕ Объект.ДополнительныеСвойства.Свойство("ЗаписатьНаборыЗначенийДоступа") Тогда
		Возврат;
	КонецЕсли;
	
	#Если Сервер Тогда
		УправлениеДоступом.ЗаполнитьНаборыЗначенийДоступаТабличныхЧастей(Объект);
	#Иначе
		УправлениеДоступом.ЗаполнитьНаборыЗначенийДоступаТабличныхЧастей(Объект.Ссылка);
	#КонецЕсли

КонецПроцедуры // ЗаписатьНаборыЗначенийДоступа()

// Обработчик ЗаписатьЗависимыеНаборыЗначенийДоступа события ПриЗаписи подписки на события
// "ЗаписатьЗависимыеНаборыЗначенийДоступа" вызывает метод записи обновления зависимых
// наборов значений доступа в регистре сведений НаборыЗначенийДоступа.
//
//  Возможен случай использования подсистемы "УправлениеДоступом", когда
// указанной подписки не существует, если зависимые наборы значений доступа не применяются.
//
Процедура ЗаписатьЗависимыеНаборыЗначенийДоступа(Знач Объект, Отказ) Экспорт

	Если Объект.ОбменДанными.Загрузка И НЕ Объект.ДополнительныеСвойства.Свойство("ЗаписатьЗависимыеНаборыЗначенийДоступа") Тогда
		Возврат;
	КонецЕсли;
	
	#Если Сервер Тогда
		УправлениеДоступом.ЗаписатьЗависимыеНаборыЗначенийДоступа(Объект);
	#Иначе
		УправлениеДоступом.ЗаписатьЗависимыеНаборыЗначенийДоступа(Объект.Ссылка);
	#КонецЕсли

КонецПроцедуры // ЗаписатьНаборыЗначенийДоступа()



