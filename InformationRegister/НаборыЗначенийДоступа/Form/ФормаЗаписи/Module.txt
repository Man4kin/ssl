
&НаКлиенте
Процедура ВключитьРедактированиеАвтоРеквизитов(Команда)
	
	Элементы.АвтоРеквизиты.ТолькоПросмотр = Ложь;
	РедактированиеАвтоРеквизитов = Истина;
	
КонецПроцедуры

&НаКлиенте
Процедура СвойствоПриИзменении(Элемент)
	
	ЗаполнитьАвтоРеквизитыНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьАвтоРеквизитыНаСервере(ПоКомандеПользователя = Ложь)
	
	Если РедактированиеАвтоРеквизитов И НЕ ПоКомандеПользователя Тогда
		Возврат;
	КонецЕсли;
	
	НаборЗаписей = РегистрыСведений.НаборыЗначенийДоступа.СоздатьНаборЗаписей();
	ЗаполнитьЗначенияСвойств(НаборЗаписей.Добавить(), Запись);
	
	УправлениеДоступом.ДобавитьНаборыЗначенийДоступа(НаборЗаписей, УправлениеДоступом.ТаблицаНаборыЗначенийДоступа(), Ложь, Истина, Запись.Объект);
	
	ЗаполнитьЗначенияСвойств(Запись, НаборЗаписей[0], "ВидДоступаЧерезПраваПоЗначениямДоступа,
	                                                  |ВидДоступаЕдинственныйДляТипаЗначенияДоступа,
	                                                  |ВидДоступаБезГруппЗначенияДоступа,
	                                                  |ВидДоступаПравоЧтения,
	                                                  |ВидДоступаПравоДобавления,
	                                                  |ВидДоступаПравоИзменения,
	                                                  |ТипЗначенияДоступа");
	Если НЕ Запись.Чтение И
		 НЕ Запись.Добавление И
	     НЕ Запись.Изменение И
	     НЕ Запись.Удаление Тогда
		 
		Запись.ВидДоступаПравоЧтения     = Неопределено;
		Запись.ВидДоступаПравоДобавления = Неопределено;
		Запись.ВидДоступаПравоИзменения  = Неопределено;
	КонецЕсли;
	
	Если ПоКомандеПользователя Тогда
		Модифицированность = Истина;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьАвтоРеквизиты(Команда)
	
	ЗаполнитьАвтоРеквизитыНаСервере(Истина);
	
КонецПроцедуры
