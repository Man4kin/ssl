
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	ВладелецЗначенияСвойства = Справочники.ЗначенияСвойствОбъектов.ПустаяСсылка();
	
	Если Объект.Ссылка = Справочники.ЗначенияСвойствОбъектов.ПустаяСсылка() Тогда
		Если Параметры.ЗначениеКопирования = Справочники.ЗначенияСвойствОбъектов.ПустаяСсылка() Тогда
			ВладелецЗначенияСвойства = Параметры.ЗначенияЗаполнения.Владелец;
		Иначе
			ВладелецЗначенияСвойства = Параметры.ЗначениеКопирования.Владелец;
		КонецЕсли;
	Иначе
		ВладелецЗначенияСвойства = Объект.Ссылка.Владелец;
	КонецЕсли;
	
	ИмяСвойства = СокрЛП(СтрПолучитьСтроку(ВладелецЗначенияСвойства.СклоненияПредмета, 1));
	
	Если ПустаяСтрока(ИмяСвойства) Тогда
		ИмяСвойства = ВладелецЗначенияСвойства.Наименование;
	КонецЕсли;
	
	Если Объект.Ссылка = Справочники.ЗначенияСвойствОбъектов.ПустаяСсылка() Тогда // создание нового
		Заголовок = ИмяСвойства + " (" + НСтр("ru = 'создание'") + ")";
	Иначе
		Заголовок = Объект.Наименование + " (" + ИмяСвойства + ")";
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	ИмяСвойства = СокрЛП(СтрПолучитьСтроку(Объект.Владелец.СклоненияПредмета, 1));
	
	Если ПустаяСтрока(ИмяСвойства) Тогда
		ИмяСвойства = Объект.Владелец.Наименование;
	КонецЕсли;
	
	Заголовок = Объект.Наименование + " (" + ИмяСвойства + ")";
	
КонецПроцедуры
